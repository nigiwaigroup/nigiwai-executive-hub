<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salary Dashboard 2026 - Nigiwai Group</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap');
        body { 
            font-family: 'Sarabun', sans-serif; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .card { 
            background: white; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 30px -2px rgba(0, 0, 0, 0.15);
        }
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--card-color) 0%, transparent 100%);
        }
        .hidden { display: none; }
        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        .tooltip-custom {
            position: relative;
            display: inline-block;
        }
        .tooltip-custom .tooltiptext {
            visibility: hidden;
            background-color: #1f2937;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }
        .tooltip-custom:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8 card p-6 bg-gradient-to-r from-blue-900 via-blue-800 to-indigo-900 text-white animate-fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold tracking-tight flex items-center gap-3">
                        <i class="fas fa-chart-line"></i>
                        Salary Dashboard 2026
                    </h1>
                    <p class="text-blue-200 mt-2">Nigiwai Group | Executive Department</p>
                </div>
                <div class="bg-white/10 backdrop-blur px-6 py-3 rounded-xl border border-white/20">
                    <p class="text-xs text-blue-200 uppercase font-semibold">ข้อมูล ณ วันที่</p>
                    <p class="font-bold text-xl">มกราคม 2569</p>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="mb-6 card p-2 flex flex-wrap gap-2">
            <button class="tab-button active" onclick="switchTab('overview')">
                <i class="fas fa-dashboard mr-2"></i>ภาพรวม
            </button>
            <button class="tab-button" onclick="switchTab('department')">
                <i class="fas fa-building mr-2"></i>วิเคราะห์ตามแผนก
            </button>
            <button class="tab-button" onclick="switchTab('employee')">
                <i class="fas fa-users mr-2"></i>รายละเอียดพนักงาน
            </button>
            <button class="tab-button" onclick="switchTab('transfer')">
                <i class="fas fa-exchange-alt mr-2"></i>การโอนย้าย
            </button>
            <button class="tab-button" onclick="switchTab('insights')">
                <i class="fas fa-lightbulb mr-2"></i>Executive Insights
            </button>
        </div>

        <!-- Overview Tab -->
        <div id="overview-tab" class="tab-content">
            <!-- KPI Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="card stat-card p-6" style="--card-color: #3b82f6;">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-gray-400 uppercase mb-2">พนักงานทั้งหมด</p>
                            <h2 class="text-4xl font-bold text-gray-800">47</h2>
                            <p class="text-xs text-gray-500 mt-2">ใน Nigiwai Group</p>
                        </div>
                        <div class="bg-blue-100 w-14 h-14 rounded-full flex items-center justify-center text-blue-600">
                            <i class="fas fa-users text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="card stat-card p-6" style="--card-color: #10b981;">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-gray-400 uppercase mb-2">ได้รับการปรับ</p>
                            <h2 class="text-4xl font-bold text-gray-800">16</h2>
                            <div class="progress-bar mt-3">
                                <div class="progress-fill" style="width: 29%;"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">34% ของพนักงานทั้งหมด</p>
                        </div>
                        <div class="bg-green-100 w-14 h-14 rounded-full flex items-center justify-center text-green-600">
                            <i class="fas fa-user-check text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="card stat-card p-6" style="--card-color: #8b5cf6;">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-gray-400 uppercase mb-2">งบประมาณเพิ่มขึ้น</p>
                            <h2 class="text-4xl font-bold text-gray-800">฿7,734</h2>
                            <p class="text-xs text-green-600 mt-2 flex items-center">
                                <i class="fas fa-arrow-up mr-1"></i>฿92,808/ปี
                            </p>
                        </div>
                        <div class="bg-purple-100 w-14 h-14 rounded-full flex items-center justify-center text-purple-600">
                            <i class="fas fa-coins text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="card stat-card p-6" style="--card-color: #f59e0b;">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs font-semibold text-gray-400 uppercase mb-2">% การปรับเฉลี่ย</p>
                            <h2 class="text-4xl font-bold text-gray-800">5.89%</h2>
                            <div class="tooltip-custom mt-2">
                                <p class="text-xs text-gray-500 flex items-center">
                                    <i class="fas fa-info-circle mr-1"></i>คำนวณจาก 16 คน
                                </p>
                                <span class="tooltiptext">คำนวณจากพนักงานที่ได้รับการปรับ</span>
                            </div>
                        </div>
                        <div class="bg-amber-100 w-14 h-14 rounded-full flex items-center justify-center text-amber-600">
                            <i class="fas fa-percentage text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- Department Budget Chart -->
                <div class="card p-6">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                        <i class="fas fa-chart-bar text-blue-500 mr-2"></i>
                        งบประมาณการปรับตามแผนก
                    </h3>
                    <div class="h-80">
                        <canvas id="deptChart"></canvas>
                    </div>
                </div>

                <!-- ROI Analysis -->
                <div class="card p-6">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                        <i class="fas fa-chart-pie text-purple-500 mr-2"></i>
                        สัดส่วนการปรับเงินเดือน
                    </h3>
                    <div class="h-80">
                        <canvas id="distributionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Executive Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="card p-6 bg-gradient-to-br from-green-500 to-green-600 text-white">
                    <div class="flex items-center gap-4">
                        <i class="fas fa-exchange-alt text-5xl opacity-80"></i>
                        <div>
                            <p class="text-sm opacity-90">Internal Mobility</p>
                            <h3 class="text-3xl font-bold">16 คน</h3>
                            <p class="text-xs opacity-80 mt-1">โอนย้ายภายในองค์กร</p>
                        </div>
                    </div>
                </div>

                <div class="card p-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white">
                    <div class="flex items-center gap-4">
                        <i class="fas fa-chart-line text-5xl opacity-80"></i>
                        <div>
                            <p class="text-sm opacity-90">Cost Efficiency</p>
                            <h3 class="text-3xl font-bold">+0.6%</h3>
                            <p class="text-xs opacity-80 mt-1">เพิ่มขึ้นจากฐานเงินเดือน</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compensation Structure Analysis -->
            <div class="card p-6 mb-8">
                <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                    <i class="fas fa-layer-group text-green-500 mr-2"></i>
                    โครงสร้างค่าตอบแทนที่ปรับ (Compensation Breakdown)
                </h3>
                <div class="h-96">
                    <canvas id="compensationChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Department Tab -->
        <div id="department-tab" class="tab-content hidden">
            <div class="mb-6 card p-4 flex items-center gap-4 flex-wrap">
                <span class="font-bold text-gray-700"><i class="fas fa-filter mr-2"></i>เลือกแผนก:</span>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-5 w-5 text-blue-600 rounded" value="all" checked onchange="filterDepts(this)">
                    <span class="ml-2 font-semibold">แสดงทั้งหมด</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Operation" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Operation</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Construction" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Construction</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Sales" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Sales</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Warehouse & Logistics" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Warehouse & Logistics</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Human Resource" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Human Resource</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Financial And Account" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Financial And Account</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Information Technology" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Information Technology</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Marketing" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Marketing</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="dept-filter form-checkbox h-4 w-4 text-blue-600 rounded" value="Executive" checked onchange="filterDepts(this)">
                    <span class="ml-2 text-sm">Executive</span>
                </label>
            </div>

            <div class="card p-6">
                <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                    <i class="fas fa-layer-group text-indigo-500 mr-2"></i>
                    สรุปภาพรวมรายแผนก
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="text-gray-500 border-b text-xs uppercase bg-gray-50 tracking-wider">
                                <th class="p-3 rounded-tl-lg">แผนก</th>
                                <th class="p-3 text-center">พนักงานที่ปรับ</th>
                                <th class="p-3 text-center">% ของทั้งหมด</th>
                                <th class="p-3 text-right">งบประมาณรวม</th>
                                <th class="p-3 text-right rounded-tr-lg">เฉลี่ย/คน</th>
                            </tr>
                        </thead>
                        <tbody id="deptTableBody" class="text-sm text-gray-700">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Employee Tab -->
        <div id="employee-tab" class="tab-content hidden">
            <div class="card p-6">
                <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center">
                    <i class="fas fa-trophy text-yellow-500 mr-2"></i>
                    รายชื่อพนักงานที่ได้รับการปรับเงินเดือน (16 คน)
                </h3>
                <p class="text-xs text-gray-400 mb-4 ml-1">
                    <i class="fas fa-hand-pointer mr-1"></i>คลิกที่แถวเพื่อดูรายละเอียดการปรับ
                </p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="text-gray-500 border-b text-xs uppercase bg-gray-50 tracking-wider">
                                <th class="p-3 rounded-tl-lg">ลำดับ</th>
                                <th class="p-3">ชื่อ-นามสกุล</th>
                                <th class="p-3">แผนก</th>
                                <th class="p-3">ตำแหน่ง</th>
                                <th class="p-3 text-right">เงินเดือนเดิม</th>
                                <th class="p-3 text-right">เงินเดือนใหม่</th>
                                <th class="p-3 text-right font-bold">ปรับเพิ่ม</th>
                                <th class="p-3 text-right rounded-tr-lg">% ปรับ</th>
                            </tr>
                        </thead>
                        <tbody id="employeeTableBody" class="text-sm text-gray-700">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Transfer Tab -->
        <div id="transfer-tab" class="tab-content hidden">
            <div class="card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-100">
                <h3 class="font-bold text-blue-800 mb-4 flex items-center text-lg">
                    <i class="fas fa-exchange-alt text-blue-600 mr-2"></i>
                    การโอนย้ายพนักงานระหว่างบริษัท (16 คน)
                </h3>
                <p class="text-sm text-blue-600 mb-4">แสดงการเคลื่อนย้ายพนักงานภายในกลุ่มบริษัท Nigiwai เพื่อเพิ่มประสิทธิภาพการทำงาน</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse bg-white rounded-lg overflow-hidden shadow-sm">
                        <thead>
                            <tr class="text-gray-500 border-b text-xs uppercase bg-gray-50 tracking-wider">
                                <th class="p-3 pl-4">ชื่อ-นามสกุล</th>
                                <th class="p-3">จากบริษัท</th>
                                <th class="p-3">ไปบริษัท</th>
                                <th class="p-3">ตำแหน่ง</th>
                            </tr>
                        </thead>
                        <tbody id="transferTableBody" class="text-gray-700 text-sm">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Insights Tab -->
        <div id="insights-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 gap-6 mb-6">
                <!-- Strategic Recommendations -->
                <div class="card p-6 bg-gradient-to-br from-gray-800 to-gray-900 text-white">
                    <h3 class="text-xl font-bold mb-4 text-yellow-400 flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>Executive Insights & Recommendations
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm leading-relaxed">
                        <div class="p-4 bg-white/5 rounded-lg backdrop-blur border border-white/10">
                            <div class="flex items-start gap-3">
                                <div class="bg-blue-500/20 p-2 rounded-lg">
                                    <i class="fas fa-coins text-blue-300 text-xl"></i>
                                </div>
                                <div>
                                    <strong class="text-white text-base">1. Cost Management Excellence</strong>
                                    <p class="mt-2 text-gray-300">งบประมาณเพิ่มขึ้นเพียง ฿7,734/เดือน (฿92,808/ปี) คิดเป็น 0.6% ของฐานเงินเดือน สามารถพิจารณาปรับตามผลงานรอบระหว่างปีได้ตามความเหมาะสม</p>
                                </div>
                            </div>
                        </div>

                        <div class="p-4 bg-white/5 rounded-lg backdrop-blur border border-white/10">
                            <div class="flex items-start gap-3">
                                <div class="bg-green-500/20 p-2 rounded-lg">
                                    <i class="fas fa-users text-green-300 text-xl"></i>
                                </div>
                                <div>
                                    <strong class="text-white text-base">2. Talent Retention Strategy</strong>
                                    <p class="mt-2 text-gray-300">Operation Department ได้รับงบประมาณสูงสุด (฿7,245) เนื่องจากเป็นแผนกหลักในการดำเนินธุรกิจ ควรตั้ง Performance KPIs และติดตาม ROI อย่างใกล้ชิดใน Q2-Q3</p>
                                </div>
                            </div>
                        </div>

                        <div class="p-4 bg-white/5 rounded-lg backdrop-blur border border-white/10">
                            <div class="flex items-start gap-3">
                                <div class="bg-purple-500/20 p-2 rounded-lg">
                                    <i class="fas fa-chart-line text-purple-300 text-xl"></i>
                                </div>
                                <div>
                                    <strong class="text-white text-base">3. Internal Mobility Impact</strong>
                                    <p class="mt-2 text-gray-300">มีการโอนย้าย 16 คน เพื่อ optimize resource allocation ส่วนใหญ่เป็นการย้ายไปบริษัทหลัก ช่วยเพิ่ม synergy และลดต้นทุนในการจ้างพนักงานใหม่</p>
                                </div>
                            </div>
                        </div>

                        <div class="p-4 bg-white/5 rounded-lg backdrop-blur border border-white/10">
                            <div class="flex items-start gap-3">
                                <div class="bg-amber-500/20 p-2 rounded-lg">
                                    <i class="fas fa-exclamation-triangle text-amber-300 text-xl"></i>
                                </div>
                                <div>
                                    <strong class="text-white text-base">4. Communication Priority</strong>
                                    <p class="mt-2 text-gray-300">พนักงาน 39 คน (71%) ไม่ได้รับการปรับ ต้องมี Clear Communication Plan เพื่ออธิบายเกณฑ์การพิจารณาและโอกาสในการพัฒนา ป้องกันปัญหา morale และ turnover</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Insights Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="card p-6 border-l-4 border-blue-500">
                    <h4 class="font-bold text-blue-900 mb-3 flex items-center">
                        <i class="fas fa-chart-bar text-blue-600 mr-2"></i>Salary Adjustment Analysis
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-arrow-up text-green-500 mr-2"></i>พนักงานที่ปรับเพิ่ม:</span>
                            <strong>15 คน (93.75%)</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-arrow-down text-red-500 mr-2"></i>พนักงานที่ปรับลด:</span>
                            <strong>1 คน (6.25%)</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-calculator text-blue-500 mr-2"></i>เฉลี่ยการปรับเพิ่ม:</span>
                            <strong class="text-green-600">+5.89%</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-star text-yellow-500 mr-2"></i>การปรับสูงสุด:</span>
                            <strong class="text-blue-600">+19.0%</strong>
                        </li>
                    </ul>
                </div>

                <div class="card p-6 border-l-4 border-green-500">
                    <h4 class="font-bold text-green-900 mb-3 flex items-center">
                        <i class="fas fa-coins text-green-600 mr-2"></i>Budget Distribution
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-calendar-alt text-blue-500 mr-2"></i>งบประมาณรวม/เดือน:</span>
                            <strong class="text-green-600">+฿7,734</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-calendar text-purple-500 mr-2"></i>งบประมาณรวม/ปี:</span>
                            <strong class="text-green-600">+฿92,808</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-user-circle text-indigo-500 mr-2"></i>เฉลี่ยต่อคน:</span>
                            <strong>฿483.38/เดือน</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-percentage text-amber-500 mr-2"></i>% จากฐานเดิม:</span>
                            <strong class="text-blue-600">+0.6%</strong>
                        </li>
                    </ul>
                </div>

                <div class="card p-6 border-l-4 border-purple-500">
                    <h4 class="font-bold text-purple-900 mb-3 flex items-center">
                        <i class="fas fa-trophy text-purple-600 mr-2"></i>Top 3 Adjustments
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="pb-2 border-b">
                            <div class="font-medium flex items-center">
                                <i class="fas fa-medal text-yellow-500 mr-2"></i>นายจิติวัฒน์ อุปวรรณะ
                            </div>
                            <div class="text-xs text-gray-500 mt-1 ml-6">Construction</div>
                            <div class="text-green-600 font-bold mt-1 ml-6">+฿4,000 (15.4%)</div>
                        </li>
                        <li class="pb-2 border-b">
                            <div class="font-medium flex items-center">
                                <i class="fas fa-medal text-gray-400 mr-2"></i>นางสาวภัรตรา เพ็ญภู่
                            </div>
                            <div class="text-xs text-gray-500 mt-1 ml-6">Sales</div>
                            <div class="text-green-600 font-bold mt-1 ml-6">+฿3,000 (19.0%)</div>
                        </li>
                        <li>
                            <div class="font-medium flex items-center">
                                <i class="fas fa-medal text-orange-600 mr-2"></i>นางสาวเสาวณี พันสุวรรณ์
                            </div>
                            <div class="text-xs text-gray-500 mt-1 ml-6">Operation</div>
                            <div class="text-green-600 font-bold mt-1 ml-6">+฿2,258 (11.4%)</div>
                        </li>
                    </ul>
                </div>

                <div class="card p-6 border-l-4 border-amber-500">
                    <h4 class="font-bold text-amber-900 mb-3 flex items-center">
                        <i class="fas fa-exchange-alt text-amber-600 mr-2"></i>Internal Mobility
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-users text-blue-500 mr-2"></i>การโอนย้ายทั้งหมด:</span>
                            <strong>16 คน</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-chart-pie text-green-500 mr-2"></i>% ของพนักงาน:</span>
                            <strong>29%</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-lightbulb text-yellow-500 mr-2"></i>ประโยชน์หลัก:</span>
                            <strong class="text-xs">Resource Optimization</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-thumbs-up text-green-500 mr-2"></i>ผลกระทบ:</span>
                            <strong class="text-green-600">Positive</strong>
                        </li>
                    </ul>
                </div>

                <div class="card p-6 border-l-4 border-red-500">
                    <h4 class="font-bold text-red-900 mb-3 flex items-center">
                        <i class="fas fa-exclamation-circle text-red-600 mr-2"></i>Action Required
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                            <span>ติดตาม Performance ของ Operation</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                            <span>สื่อสารกับพนักงานที่ไม่ได้ปรับ</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                            <span>พิจารณาหาระบบ HR ที่มีการวัด KPIs ทุกไตรมาส</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check-circle text-green-500 mt-1"></i>
                            <span>วางแผนปรับเงินเดือนรอบถัดไป ( ถ้ามี Budget ในช่วงกลางปี โดยพิจาณณาจากคนที่ไมไ่ด้ปรับในรอบแรกแล้ว Performance ดีก่อน </span>
                        </li>
                    </ul>
                </div>

                <div class="card p-6 border-l-4 border-indigo-500">
                    <h4 class="font-bold text-indigo-900 mb-3 flex items-center">
                        <i class="fas fa-chart-pie text-indigo-600 mr-2"></i>Compensation Mix
                    </h4>
                    <ul class="text-sm text-gray-700 space-y-2">
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-money-bill-wave text-green-500 mr-2"></i>ฐานเงินเดือน:</span>
                            <strong>65%</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-briefcase text-blue-500 mr-2"></i>ค่าตำแหน่ง:</span>
                            <strong>20%</strong>
                        </li>
                        <li class="flex justify-between items-center">
                            <span><i class="fas fa-award text-purple-500 mr-2"></i>ค่าชำนาญการ:</span>
                            <strong>15%</strong>
                        </li>
                        <li class="text-xs text-gray-500 mt-2">
                            <i class="fas fa-info-circle text-blue-400 mr-1"></i>*คำนวณจากการปรับทั้งหมด
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-gray-500 text-sm py-4">
            <p>© 2026 Nigiwai Group | Salary Dashboard By Executive Department</p>
            <p class="mt-1">Last Updated: January 2026</p>
        </div>
    </div>

    <script>
        // Employee Data from Excel file
        const employees = [
            {name: "นายจิติวัฒน์ อุปวรรณะ", dept: "Construction", position: "Interior Designer", oldSalary: 26000, newSalary: 30000, details: "ฐานเงินเดือน: +1,000, ค่าตำแหน่ง: +2,000, ค่าชำนาญการ: +1,000"},
            {name: "นางสาวภัรตรา เพ็ญภู่", dept: "Sales", position: "After Sales - Level II", oldSalary: 15750, newSalary: 18750, details: "ค่าตำแหน่ง: +1,000, ค่าชำนาญการ: +2,000"},
            {name: "นางสาวเสาวณี พันสุวรรณ์", dept: "Operation", position: "Core Team - Level II", oldSalary: 19742.5, newSalary: 22000, details: "ฐานเงินเดือน: +1,150, ค่าชำนาญการ: +1,108"},
            {name: "นายณัฐกิจ ต้นโต", dept: "Warehouse & Logistics", position: "พนักงานขนส่ง", oldSalary: 13000, newSalary: 15000, details: "ฐานเงินเดือน: +1,000, ค่าชำนาญการ: +1,000"},
            {name: "นาย กฤษฎา จันทร์ฝา", dept: "Human Resource", position: "Senior Human Resources Administrator", oldSalary: 20064, newSalary: 22000, details: "ฐานเงินเดือน: +436, ค่าตำแหน่ง: +1,000, ค่าชำนาญการ: +500"},
            {name: "นายวินัย หนองแพ", dept: "Operation", position: "Executive Chef - Lv.I", oldSalary: 33940.63, newSalary: 35500, details: "ฐานเงินเดือน: +438, ค่าตำแหน่ง: +622, ค่าชำนาญการ: +500"},
            {name: "นางสาว พานทอง รุ่งอนันต์กุลสิริ", dept: "Executive", position: "Executive Assistant - Level I", oldSalary: 24473, newSalary: 26000, details: "ฐานเงินเดือน: +340, ค่าตำแหน่ง: +1,000, ค่าชำนาญการ: +187"},
            {name: "นางสาวกชชลจรรย์ สุทธิกิตติพงศ์", dept: "Financial And Account", position: "General Leader", oldSalary: 29300, newSalary: 30500, details: "ค่าตำแหน่ง: +500, ค่าชำนาญการ: +700"},
            {name: "นางสาวช้องนาง หินขาว", dept: "Operation", position: "Core Team - Level II", oldSalary: 20900, newSalary: 22000, details: "ฐานเงินเดือน: +100, ค่าชำนาญการ: +1,000"},
            {name: "นายศักดิ์จรินทร์ ดวงฤทัย", dept: "Information Technology", position: "IT Support", oldSalary: 15000, newSalary: 16000, details: "ฐานเงินเดือน: +1,000"},
            {name: "นางสาวมณีรัตน์ ธงทอง", dept: "Operation", position: "Production Staff", oldSalary: 13000, newSalary: 14000, details: "ค่าชำนาญการ: +1,000"},
            {name: "นางสาวศิริวรรณ กำรัตน์", dept: "Operation", position: "Chef", oldSalary: 15000, newSalary: 16000, details: "ค่าชำนาญการ: +1,000"},
            {name: "นางสาวฐิติกานต์ รักเมือง", dept: "Marketing", position: "Graphic Designer - Lv I", oldSalary: 16000, newSalary: 16500, details: "ค่าชำนาญการ: +500"},
            {name: "นางสาวอรอริยา สุดสุข", dept: "Operation", position: "ART Operation- Lv.II", oldSalary: 35172, newSalary: 35500, details: "ฐานเงินเดือน: +217, ค่าตำแหน่ง: +111"},
            {name: "นางสาวธนภรณ์ ผ่องประทุม", dept: "Marketing", position: "Art Supervisor", oldSalary: 29674.2, newSalary: 30000, details: "ฐานเงินเดือน: +117, ค่าตำแหน่ง: +209"},
            {name: "นายพงศธร โชติยะศิลป์", dept: "Executive", position: "Chief Financial Officer", oldSalary: 65000, newSalary: 50000, details: "ฐานเงินเดือน: -15,000"}
        ];

        // Transfer Data - corrected from Excel (บริษัทเดิม = FROM, บริษัทใหม่ = TO)
        const transfers = [
            {name: "นางสาวธิติญา ปัญญายิ่ง", from: "บริษัท คินโนะสุเกะ กรุ๊ป จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", position: "Graphic Designer - Lv III"},
            {name: "นางสาวฐิติกานต์ รักเมือง", from: "บริษัท คินโนะสุเกะ กรุ๊ป จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ คอนสตรัคชั่น จำกัด (สำนักงานใหญ่)", position: "Graphic Designer - Lv I"},
            {name: "นางสาวธนภรณ์ ผ่องประทุม", from: "บริษัท ทุเรียนนิสซึ่ม จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Art Supervisor"},
            {name: "นายวินัย หนองแพ", from: "บริษัท ทุเรียนนิสซึ่ม จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Executive Chef - Lv.I"},
            {name: "นางสาวเสาวณี พันสุวรรณ์", from: "บริษัท ทุเรียนนิสซึ่ม จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Core Team - Level II"},
            {name: "นางสาวณัฐชานันท์ ธนังชูศิลป์", from: "บริษัท ทุเรียนนิสซึ่ม จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ กรุ๊ป จำกัด (สำนักงานใหญ่)", position: "Sales Manager (Acting)"},
            {name: "นายกันต์ศักย์ ปานมงคล", from: "บริษัท นิกิวาอิ กรุ๊ป จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Quality Control & Audit Manager"},
            {name: "นางสาววัชรวีร์ ศุภเลิศธนศักดิ์", from: "บริษัท นิกิวาอิ กรุ๊ป จำกัด (สำนักงานใหญ่)", to: "บริษัท เวียงเวียต ฟู้ด จำกัด (สำนักงานใหญ่)", position: "Human Resources Manager"},
            {name: "นางสาวกรวรรณ สุวรรณพรรค", from: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Accounts Payable"},
            {name: "นายพิชญา บัวบรรจง", from: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ คอนสตรัคชั่น จำกัด (สำนักงานใหญ่)", position: "IT Specialist"},
            {name: "นายกรกช บรรพจน์พิทักษ์", from: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", to: "บริษัท เวียงเวียต ฟู้ด จำกัด (สำนักงานใหญ่)", position: "Video Creator"},
            {name: "นางสาวพรวิไล มีชัย", from: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", to: "บริษัท คินโนะสุเกะ กรุ๊ป จำกัด (สำนักงานใหญ่)", position: "Admin Purchasing"},
            {name: "นางสาวกัลยรักษ์ ตระกูลอินทร์", from: "บริษัท นิกิวาอิ คอนสตรัคชั่น จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", position: "Senior Accounting Officer"},
            {name: "นายภูรินทร์ บุญวรรณ", from: "บริษัท ยู คูซีน จำกัด (สำนักงานใหญ่)", to: "บริษัท เอ็นจีดับบลิวซี จำกัด (สำนักงานใหญ่)", position: "Accounts Receivable"},
            {name: "นางสาวมณีรัตน์ ธงทอง", from: "บริษัท เวียงเวียต ฟู้ด จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", position: "Production Staff"},
            {name: "นางสาวศิริวรรณ กำรัตน์", from: "บริษัท เวียงเวียต ฟู้ด จำกัด (สำนักงานใหญ่)", to: "บริษัท นิกิวาอิ กู๊ดส์ เวลท์ จำกัด (สำนักงานใหญ่)", position: "Chef"}
        ];

        // Department mapping
        const deptMapping = {
            "Operation": "Operation",
            "Construction": "Construction",
            "Sales": "Sales",
            "Warehouse & Logistics": "WarehouseLogistics",
            "Human Resource": "HumanResource",
            "Financial And Account": "FinancialAndAccount",
            "Information Technology": "InformationTechnology",
            "Marketing": "Marketing",
            "Executive": "Executive"
        };

        // Calculate department statistics
        const deptStats = {};
        employees.forEach(emp => {
            if (!deptStats[emp.dept]) {
                deptStats[emp.dept] = {count: 0, total: 0};
            }
            deptStats[emp.dept].count++;
            deptStats[emp.dept].total += (emp.newSalary - emp.oldSalary);
        });

        // Populate employee table
        function populateEmployeeTable() {
            const tbody = document.getElementById('employeeTableBody');
            tbody.innerHTML = '';
            
            employees.forEach((emp, index) => {
                const diff = emp.newSalary - emp.oldSalary;
                const percent = ((diff / emp.oldSalary) * 100).toFixed(1);
                const isNegative = diff < 0;
                
                const row = document.createElement('tr');
                row.className = `border-b hover:bg-gray-50 cursor-pointer dept-${deptMapping[emp.dept]} dept-row`;
                row.onclick = () => toggleDetails(`emp-detail-${index}`);
                
                row.innerHTML = `
                    <td class="p-3 font-semibold text-gray-500">
                        <i class="fas fa-hashtag text-gray-300 text-xs mr-1"></i>${index + 1}
                    </td>
                    <td class="p-3 font-medium text-blue-600">
                        <i class="fas fa-user-circle text-blue-400 mr-2"></i>${emp.name}
                    </td>
                    <td class="p-3">
                        <i class="fas fa-briefcase text-gray-400 text-xs mr-1"></i>${emp.dept}
                    </td>
                    <td class="p-3 text-xs text-gray-500">${emp.position}</td>
                    <td class="p-3 text-right text-gray-400">
                        <i class="fas fa-coins text-gray-300 text-xs mr-1"></i>
                        ${emp.oldSalary.toLocaleString('th-TH', {minimumFractionDigits: 2})}
                    </td>
                    <td class="p-3 text-right">
                        <i class="fas fa-coins text-green-400 text-xs mr-1"></i>
                        ${emp.newSalary.toLocaleString('th-TH', {minimumFractionDigits: 2})}
                    </td>
                    <td class="p-3 text-right font-bold ${isNegative ? 'text-red-600' : 'text-blue-900'}">
                        <i class="fas ${isNegative ? 'fa-arrow-down' : 'fa-arrow-up'} text-xs mr-1"></i>
                        ${isNegative ? '' : '+'}${diff.toLocaleString('th-TH', {minimumFractionDigits: 2})}
                    </td>
                    <td class="p-3 text-right">
                        <span class="px-2 py-1 rounded text-xs ${isNegative ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}">
                            <i class="fas fa-percentage text-xs mr-1"></i>${percent}%
                        </span>
                    </td>
                `;
                tbody.appendChild(row);
                
                // Detail row
                const detailRow = document.createElement('tr');
                detailRow.id = `emp-detail-${index}`;
                detailRow.className = 'hidden bg-blue-50 border-l-4 border-blue-500';
                detailRow.innerHTML = `
                    <td colspan="8" class="p-4">
                        <div class="flex items-start gap-3">
                            <div class="bg-blue-500 text-white p-2 rounded-lg">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>
                                <span class="font-semibold text-gray-700 text-sm">รายละเอียดการปรับค่าตอบแทน:</span>
                                <p class="text-gray-600 mt-1">${emp.details}</p>
                            </div>
                        </div>
                    </td>
                `;
                tbody.appendChild(detailRow);
            });
        }

        // Populate department table
        function populateDeptTable() {
            const tbody = document.getElementById('deptTableBody');
            tbody.innerHTML = '';
            
            const sortedDepts = Object.entries(deptStats).sort((a, b) => b[1].total - a[1].total);
            
            sortedDepts.forEach(([dept, stats]) => {
                const percent = ((stats.count / 16) * 100).toFixed(1);
                const avgPerPerson = (stats.total / stats.count).toFixed(0);
                const isNegative = stats.total < 0;
                
                const row = document.createElement('tr');
                row.className = `border-b hover:bg-blue-50 dept-${deptMapping[dept]} dept-row`;
                
                row.innerHTML = `
                    <td class="p-3 font-medium text-gray-800">
                        <i class="fas fa-building text-blue-500 mr-2"></i>${dept}
                    </td>
                    <td class="p-3 text-center font-semibold text-blue-600">
                        <i class="fas fa-user text-sm mr-1"></i>${stats.count} คน
                    </td>
                    <td class="p-3 text-center">
                        <div class="flex items-center justify-center gap-2">
                            <span class="font-medium">${percent}%</span>
                            <div class="w-20 h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-blue-500" style="width: ${percent}%"></div>
                            </div>
                        </div>
                    </td>
                    <td class="p-3 text-right font-bold ${isNegative ? 'text-red-600' : 'text-green-600'}">
                        <i class="fas ${isNegative ? 'fa-arrow-down' : 'fa-arrow-up'} text-sm mr-1"></i>
                        ${isNegative ? '' : '+'}฿${stats.total.toLocaleString('th-TH', {minimumFractionDigits: 2})}
                    </td>
                    <td class="p-3 text-right text-gray-600">
                        <i class="fas fa-calculator text-gray-400 text-sm mr-1"></i>
                        ฿${Math.abs(parseFloat(avgPerPerson)).toLocaleString('th-TH')}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Populate transfer table
        function populateTransferTable() {
            const tbody = document.getElementById('transferTableBody');
            tbody.innerHTML = '';
            
            transfers.forEach((transfer, idx) => {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-3 font-medium">
                        <i class="fas fa-user text-blue-500 mr-2"></i>${transfer.name}
                    </td>
                    <td class="p-3 text-gray-600 text-xs">
                        <i class="fas fa-building text-red-400 mr-2"></i>${transfer.from}
                    </td>
                    <td class="p-3 text-blue-600 font-semibold text-xs">
                        <i class="fas fa-arrow-right text-green-500 mr-2"></i>
                        <i class="fas fa-building text-green-500 mr-1"></i>${transfer.to}
                    </td>
                    <td class="p-3 text-sm text-gray-800">
                        <i class="fas fa-id-badge text-purple-400 mr-2"></i>${transfer.position}
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');
            event.target.classList.add('active');
        }

        // Filter departments
        function filterDepts(checkbox) {
            const isAll = checkbox.value === 'all';
            const allCheckbox = document.querySelector('input[value="all"]');
            const otherCheckboxes = document.querySelectorAll('.dept-filter:not([value="all"])');
            
            if (isAll) {
                otherCheckboxes.forEach(cb => cb.checked = checkbox.checked);
            } else {
                if (!checkbox.checked) {
                    allCheckbox.checked = false;
                } else {
                    const allChecked = Array.from(otherCheckboxes).every(cb => cb.checked);
                    if (allChecked) allCheckbox.checked = true;
                }
            }

            const selectedDepts = Array.from(otherCheckboxes)
                .filter(cb => cb.checked)
                .map(cb => cb.value);
            
            document.querySelectorAll('.dept-row').forEach(row => {
                let shouldShow = selectedDepts.some(dept => 
                    row.classList.contains('dept-' + dept.replace(/ & /g, '').replace(/ /g, ''))
                );
                
                row.classList.toggle('hidden', !shouldShow);
            });
        }

        // Toggle details
        function toggleDetails(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        // Initialize Charts
        Chart.register(ChartDataLabels);

        // Department Budget Chart
        const deptLabels = Object.keys(deptStats);
        const deptValues = Object.values(deptStats).map(s => s.total);
        
        const deptCtx = document.getElementById('deptChart').getContext('2d');
        new Chart(deptCtx, {
            type: 'bar',
            data: {
                labels: deptLabels,
                datasets: [{
                    label: 'งบประมาณ (บาท)',
                    data: deptValues,
                    backgroundColor: function(context) {
                        return context.dataset.data[context.dataIndex] < 0 ? '#ef4444' : '#3b82f6';
                    },
                    borderRadius: 8,
                    barPercentage: 0.7
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                layout: { padding: { right: 60 } },
                scales: {
                    x: { grid: { display: false }, ticks: { display: false } },
                    y: { grid: { display: false }, ticks: { font: { family: 'Sarabun', size: 12 } } }
                },
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        anchor: 'end',
                        align: 'end',
                        color: '#4b5563',
                        font: { weight: 'bold', family: 'Sarabun', size: 11 },
                        formatter: (value) => (value >= 0 ? '+' : '') + '฿' + value.toLocaleString('th-TH')
                    }
                }
            }
        });

        // Distribution Pie Chart
        const adjustmentRanges = {
            '฿0-500': 0,
            '฿501-1,000': 0,
            '฿1,001-2,000': 0,
            '฿2,001-3,000': 0,
            '฿3,001+': 0,
            'ปรับลด': 0
        };

        employees.forEach(emp => {
            const diff = emp.newSalary - emp.oldSalary;
            if (diff < 0) adjustmentRanges['ปรับลด']++;
            else if (diff <= 500) adjustmentRanges['฿0-500']++;
            else if (diff <= 1000) adjustmentRanges['฿501-1,000']++;
            else if (diff <= 2000) adjustmentRanges['฿1,001-2,000']++;
            else if (diff <= 3000) adjustmentRanges['฿2,001-3,000']++;
            else adjustmentRanges['฿3,001+']++;
        });

        const distCtx = document.getElementById('distributionChart').getContext('2d');
        new Chart(distCtx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(adjustmentRanges),
                datasets: [{
                    data: Object.values(adjustmentRanges),
                    backgroundColor: ['#60a5fa', '#34d399', '#fbbf24', '#f87171', '#a78bfa', '#ef4444'],
                    borderWidth: 3,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { font: { family: 'Sarabun', size: 12 } }
                    },
                    datalabels: {
                        color: '#fff',
                        font: { weight: 'bold', family: 'Sarabun', size: 12 },
                        formatter: (value) => value === 0 ? '' : value + ' คน'
                    }
                }
            }
        });

        // Compensation Structure Chart
        const compensationData = {
            'ฐานเงินเดือน': 0,
            'ค่าตำแหน่ง': 0,
            'ค่าชำนาญการ': 0,
            'อื่นๆ': 0
        };

        // Parse adjustment details to categorize
        employees.forEach(emp => {
            const details = emp.details.toLowerCase();
            if (details.includes('ฐาน')) compensationData['ฐานเงินเดือน']++;
            if (details.includes('ตำแหน่ง')) compensationData['ค่าตำแหน่ง']++;
            if (details.includes('ชำนาญ')) compensationData['ค่าชำนาญการ']++;
        });

        const compCtx = document.getElementById('compensationChart').getContext('2d');
        new Chart(compCtx, {
            type: 'bar',
            data: {
                labels: Object.keys(compensationData),
                datasets: [{
                    label: 'จำนวนพนักงาน',
                    data: Object.values(compensationData),
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.8)',
                        'rgba(16, 185, 129, 0.8)',
                        'rgba(139, 92, 246, 0.8)',
                        'rgba(245, 158, 11, 0.8)'
                    ],
                    borderColor: [
                        'rgba(59, 130, 246, 1)',
                        'rgba(16, 185, 129, 1)',
                        'rgba(139, 92, 246, 1)',
                        'rgba(245, 158, 11, 1)'
                    ],
                    borderWidth: 2,
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { stepSize: 1, font: { family: 'Sarabun' } },
                        grid: { color: 'rgba(0, 0, 0, 0.05)' }
                    },
                    x: {
                        ticks: { font: { family: 'Sarabun', size: 12 } },
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false },
                    datalabels: {
                        anchor: 'end',
                        align: 'top',
                        color: '#1f2937',
                        font: { weight: 'bold', family: 'Sarabun' },
                        formatter: (value) => value > 0 ? value + ' คน' : ''
                    }
                }
            }
        });

        // Initialize tables
        populateEmployeeTable();
        populateDeptTable();
        populateTransferTable();
    </script>
</body>
</html>